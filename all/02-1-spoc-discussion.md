# 第三讲 启动、中断、异常和系统调用-思考题

## 3.1 BIOS

 1. 比较UEFI和BIOS的区别。
 
 >
UEFI，全称Unified Extensible Firmware Interface，即“统一的可扩展固件接口”，是一种详细描述全新类型接口的标准，这种接口用于操作系统自动从预启动的操作环境，加载到一种操作系统上，UEFI抛去了传统BIOS需要长时间自检的问题，让硬件初始化以及引导系统变得简洁快速.主要带来的便利有：
>
>1）UEFI已具备文件系统的支持，它能够直接读取FAT分区中的文件,同时，可直接在其中运行的应用程序。
>
>2）不再需要主引导记录，不再需要活动分区，不需要任何工具，只要复制安装文件到一个FAT32（主）分区/U盘中，然后从这个分区/U盘启动
>
>3)UEFI是用模块化、C语言风格的参数堆栈传递方式、动态链接的形式构建系统，它比BIOS更易于实现，容错和纠错特性也更强，从而缩短了系统研发的时间。
>
 2. 描述PXE的大致启动流程。
 
>
 PXE即 “preboot execute environment”,工作于Client/Server的网络模式，支持工作站通过网络从远端服务器下载映像，并由此支持通过网络启动操作系统。在启动过程中，终端要求服务器分配IP地址，再用TFTP（trivial file transfer protocol）或MTFTP(multicast trivial file transfer protocol)协议下载一个启动软件包到本机内存中执行，由这个启动软件包完成终端基本软件设置，从而引导预先安装在服务器中的终端操作系统。
>


## 3.2 系统启动流程

 1. 了解NTLDR的启动流程。
 
>
> NTLDR启动流程：
1、电源自检程序开始运行
2、主引导记录被装入内存，并且程序开始执行
3、活动分区的引导扇区被装入内存
4、NTLDR从引导扇区被装入并初始化
5、将处理器的实模式改为32位平滑内存模式
6、NTLDR开始运行适当的小文件系统驱动程序。
7、NTLDR读boot.ini文件
8、NTLDR装载所选操作系统
如果windows NT/windows 2000/windows XP/windows server 2003这些操作系统被选择，NTLDR运行Ntdetect。
对于其他的操作系统，NTLDR装载并运行Bootsect.dos然后向它传递控制。
windows NT过程结束。
9.Ntdetect搜索计算机硬件并将列表传送给NTLDR，以便将这些信息写进\\HKE Y_LOCAL_MACHINE\HARDWARE中。
10.然后NTLDR装载Ntoskrnl.exe，Hal.dll和系统信息集合。
11.Ntldr搜索系统信息集合，并装载设备驱动配置以便设备在启动时开始工作
12.Ntldr把控制权交给Ntoskrnl.exe，这时,启动程序结束,装载阶段开始

 2. 了解GRUB的启动流程。
 >
> grub启动过程中用到几个重要的文件,stage1,stage2,有的时候需要stage1.5.这些文件一般都
    在/boot/grub文件夹下面.grub被载入通常包括以下几个步骤:
    1. 装载基本的引导装载程序(stage1),stage1通常位于主引导扇区里面,对于硬盘就是MBR了,stage1的   主要功能就是装载第二引导程序(stage2).这主要是归结于在主引导扇区中没有足够的空间用于其他东西。
    2. 装载第二引导装载程序(stage2),这第二引导装载程序实际上是引出更高级的功能,　
     以允许用户装载入一个特定的操作系统。在GRUB中，这步是让用户显示一个菜单或
     是输入命令。由于stage2很大,所以它一般位于文件系统之中(通常是boot所在的根
     分区).
    3.stage1.5和文件系统有关系: 有时候基本引导装载程序(stage1)不能识别stage2所在的文件系统分区,那么这
    时候就需要stage1.5来连接stage1和stage2了.
 
 3. 比较NTLDR和GRUB的功能有差异。
 >
>
 
 1. 了解u-boot的功能。

## 3.3 中断、异常和系统调用比较

 1. 描述int、iret、call和ret的准确功能。
 >
>int :产生需要马上处理的中断信息,引发中断过程.
>
>iret :从中断中恢复中断前的状态,中断服务程序的最后一条指令。IRET指令将推入堆栈的段地址和偏移地址弹出，使程序返回到原来发生中断的地方。
>
>call: 进行跳转，跳转之前保存返回地址（下一条指令的地址），以便在跳转目标代码
>
>ret: 子程序的返回，当前堆栈指针减2,返回之前的指令地址。

## 3.4 系统调用
 1. Linux的系统调用有哪些？大致的功能分类有哪些？
 
## 3.5 系统调用示例
## 3.6 ucore+系统调用代码
 1. ucore的系统调用中参数传递代码分析。
 
 1. ucore的系统调用中返回结果的传递代码分析。
